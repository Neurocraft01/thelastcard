{% load static %}
<nav class="fixed w-full z-50 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
            <!-- Brand -->
            <a href="{% url 'landing:home' %}" class="flex items-center gap-2">
                <div class="w-10 h-10 gold-gradient rounded-lg flex items-center justify-center shadow-lg">
                    <span class="material-icons-round text-black font-bold">contactless</span>
                </div>
                <span class="font-display text-xl tracking-wider hidden sm:block gold-text uppercase font-bold">The Last Card</span>
            </a>
            
            <!-- Navigation Links -->
            <div class="hidden md:flex items-center space-x-8">
                <a href="{% url 'landing:home' %}" class="hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest{% if request.resolver_match.url_name == 'home' %} text-primary{% endif %}">Home</a>
                <a href="{% url 'landing:features' %}" class="hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest{% if request.resolver_match.url_name == 'features' %} text-primary{% endif %}">Features</a>
                <a href="{% url 'landing:pricing' %}" class="hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest{% if request.resolver_match.url_name == 'pricing' %} text-primary{% endif %}">Pricing</a>
                <a href="{% url 'landing:about' %}" class="hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest{% if request.resolver_match.url_name == 'about' %} text-primary{% endif %}">About</a>
                <a href="{% url 'landing:contact' %}" class="hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest{% if request.resolver_match.url_name == 'contact' %} text-primary{% endif %}">Contact</a>
            </div>
            
            <!-- Actions -->
            <div class="flex items-center gap-4">
                <!-- Dark Mode Toggle -->
                <button class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" onclick="toggleDarkMode()">
                    <span class="material-icons-round text-xl dark:hidden">dark_mode</span>
                    <span class="material-icons-round text-xl hidden dark:block">light_mode</span>
                </button>
                
                {% if user.is_authenticated %}
                <a href="{% url 'accounts:dashboard_redirect' %}" class="hidden sm:flex items-center gap-2 px-4 py-2 text-slate-600 dark:text-slate-300 hover:text-primary transition-colors font-medium text-sm">
                    <span class="material-icons-round text-lg">dashboard</span>
                    Dashboard
                </a>
                <a href="{% url 'accounts:logout' %}" class="bg-primary text-black font-bold py-2 px-6 rounded-full hover:brightness-110 transition-all text-sm uppercase tracking-tighter">
                    Logout
                </a>
                {% else %}
                <a href="{% url 'accounts:login' %}" class="hidden sm:block text-slate-600 dark:text-slate-300 hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest">Log In</a>
                <a href="{% url 'accounts:register' %}" class="bg-primary text-black font-bold py-2 px-6 rounded-full hover:brightness-110 transition-all text-sm uppercase tracking-tighter">Get Your Card</a>
                {% endif %}
                
                <!-- Mobile Toggle -->
                <button class="md:hidden p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" id="navbarToggle" aria-label="Toggle navigation">
                    <span class="material-icons-round text-2xl">menu</span>
                </button>
            </div>
        </div>
    </div>
</nav>

<!-- Mobile Navigation -->
<div class="fixed inset-0 z-50 bg-background-light dark:bg-background-dark transform translate-x-full transition-transform duration-300 md:hidden" id="mobileNav">
    <div class="flex flex-col h-full">
        <div class="flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800">
            <a href="{% url 'landing:home' %}" class="flex items-center gap-2">
                <div class="w-10 h-10 gold-gradient rounded-lg flex items-center justify-center">
                    <span class="material-icons-round text-black">contactless</span>
                </div>
                <span class="font-display text-lg gold-text uppercase font-bold">The Last Card</span>
            </a>
            <button class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors" id="mobileNavClose">
                <span class="material-icons-round text-2xl">close</span>
            </button>
        </div>
        
        <nav class="flex-1 p-6 space-y-2">
            <a href="{% url 'landing:home' %}" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium text-lg">
                <span class="material-icons-round text-primary">home</span>
                Home
            </a>
            <a href="{% url 'landing:features' %}" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium text-lg">
                <span class="material-icons-round text-primary">auto_awesome</span>
                Features
            </a>
            <a href="{% url 'landing:pricing' %}" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium text-lg">
                <span class="material-icons-round text-primary">sell</span>
                Pricing
            </a>
            <a href="{% url 'landing:about' %}" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium text-lg">
                <span class="material-icons-round text-primary">info</span>
                About
            </a>
            <a href="{% url 'landing:contact' %}" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium text-lg">
                <span class="material-icons-round text-primary">mail</span>
                Contact
            </a>
        </nav>
        
        <div class="p-6 space-y-3 border-t border-slate-200 dark:border-slate-800">
            {% if user.is_authenticated %}
            <a href="{% url 'accounts:dashboard_redirect' %}" class="flex items-center justify-center gap-2 w-full py-4 bg-primary text-black font-bold rounded-xl hover:brightness-110 transition-all uppercase tracking-widest">
                <span class="material-icons-round">dashboard</span>
                Dashboard
            </a>
            <a href="{% url 'accounts:logout' %}" class="flex items-center justify-center w-full py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold hover:bg-slate-100 dark:hover:bg-slate-800 transition-all uppercase tracking-widest">
                Logout
            </a>
            {% else %}
            <a href="{% url 'accounts:register' %}" class="flex items-center justify-center gap-2 w-full py-4 bg-primary text-black font-bold rounded-xl hover:brightness-110 transition-all uppercase tracking-widest">
                <span class="material-icons-round">shopping_bag</span>
                Get Your Card
            </a>
            <a href="{% url 'accounts:login' %}" class="flex items-center justify-center w-full py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold hover:bg-slate-100 dark:hover:bg-slate-800 transition-all uppercase tracking-widest">
                Log In
            </a>
            {% endif %}
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.getElementById('navbarToggle');
        const mobileNav = document.getElementById('mobileNav');
        const closeBtn = document.getElementById('mobileNavClose');
        
        if (toggle && mobileNav) {
            toggle.addEventListener('click', function() {
                mobileNav.classList.remove('translate-x-full');
            });
        }
        
        if (closeBtn && mobileNav) {
            closeBtn.addEventListener('click', function() {
                mobileNav.classList.add('translate-x-full');
            });
        }
    });
</script>