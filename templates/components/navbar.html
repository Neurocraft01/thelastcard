{% load static %}
<nav class="fixed w-full z-50 backdrop-blur-md border-b border-zinc-800" style="background: rgba(9,9,11,0.9);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
            <!-- Brand -->
            <a href="{% url 'landing:home' %}" class="flex items-center gap-2">
                <div class="w-10 h-10 gold-gradient rounded-lg flex items-center justify-center shadow-lg">
                    <span class="material-icons-round text-black font-bold">contactless</span>
                </div>
                <span class="font-display text-xl tracking-wider hidden sm:block gold-text uppercase font-bold">The Last Card</span>
            </a>
            
            <!-- Navigation Links -->
            <div class="md:flex items-center space-x-8">
                <a href="{% url 'landing:home' %}" class="text-zinc-300 hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest">Home</a>
                <a href="{% url 'landing:home' %}#free-preview" class="text-zinc-300 hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest">Free Card Preview</a>
                <a href="{% url 'landing:home' %}#how-it-works" class="text-zinc-300 hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest">Process</a>
                <a href="{% url 'landing:home' %}#faqs" class="text-zinc-300 hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest">FAQs</a>
                <!-- <a href="{% url 'accounts:register' %}" class="text-zinc-300 hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest">Get your card now</a> -->
            </div>
            
            <!-- Actions -->
            <div class="flex items-center gap-4">
                {% if user.is_authenticated %}
                <a href="{% url 'accounts:dashboard_redirect' %}" class="hidden sm:flex items-center gap-2 px-4 py-2 text-zinc-300 hover:text-primary transition-colors font-medium text-sm">
                    <span class="material-icons-round text-lg">dashboard</span>
                    Dashboard
                </a>
                <a href="{% url 'accounts:logout' %}" class="bg-primary text-black font-bold py-2 px-6 rounded-full hover:brightness-110 transition-all text-sm uppercase tracking-tighter">
                    Logout
                </a>
                {% else %}
                <a href="{% url 'accounts:login' %}" class="hidden sm:block text-zinc-300 hover:text-primary transition-colors font-medium text-sm uppercase tracking-widest">Log In</a>
                <a href="{% url 'accounts:register' %}" class="bg-primary text-black font-bold py-2 px-6 rounded-full hover:brightness-110 transition-all text-sm uppercase tracking-tighter">Get Your Card</a>
                {% endif %}
                
                <!-- Mobile Toggle -->
                <button class="md:hidden p-2 rounded-lg hover:bg-zinc-800 transition-colors text-zinc-300" id="navbarToggle" aria-label="Toggle navigation">
                    <span class="material-icons-round text-2xl">menu</span>
                </button>
            </div>
        </div>
    </div>
</nav>

<!-- Mobile Navigation -->
<div class="fixed inset-0 z-50 transform translate-x-full transition-transform duration-300 md:hidden" id="mobileNav" style="background: #09090b;">
    <div class="flex flex-col h-full">
        <div class="flex items-center justify-between p-6 border-b border-zinc-800">
            <a href="{% url 'landing:home' %}" class="flex items-center gap-2">
                <div class="w-10 h-10 gold-gradient rounded-lg flex items-center justify-center">
                    <span class="material-icons-round text-black">contactless</span>
                </div>
                <span class="font-display text-lg gold-text uppercase font-bold">The Last Card</span>
            </a>
            <button class="p-2 hover:bg-zinc-800 rounded-lg transition-colors text-zinc-300" id="mobileNavClose">
                <span class="material-icons-round text-2xl">close</span>
            </button>
        </div>
        
        <nav class="flex-1 p-6 space-y-2">
            <a href="{% url 'landing:home' %}" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-zinc-800 transition-colors font-medium text-lg text-zinc-200">
                <span class="material-icons-round text-primary">home</span>
                Home
            </a>
            <a href="{% url 'landing:home' %}#free-preview" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-zinc-800 transition-colors font-medium text-lg text-zinc-200">
                <span class="material-icons-round text-primary">preview</span>
                Free Card Preview
            </a>
            <a href="{% url 'landing:home' %}#how-it-works" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-zinc-800 transition-colors font-medium text-lg text-zinc-200">
                <span class="material-icons-round text-primary">autorenew</span>
                Process
            </a>
            <a href="{% url 'landing:home' %}#faqs" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-zinc-800 transition-colors font-medium text-lg text-zinc-200">
                <span class="material-icons-round text-primary">help</span>
                FAQs
            </a>
            <a href="{% url 'accounts:register' %}" class="flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-zinc-800 transition-colors font-medium text-lg text-zinc-200">
                <span class="material-icons-round text-primary">shopping_bag</span>
                Get your card now
            </a>
        </nav>
        
        <div class="p-6 space-y-3 border-t border-zinc-800">
            {% if user.is_authenticated %}
            <a href="{% url 'accounts:dashboard_redirect' %}" class="flex items-center justify-center gap-2 w-full py-4 bg-primary text-black font-bold rounded-xl hover:brightness-110 transition-all uppercase tracking-widest">
                <span class="material-icons-round">dashboard</span>
                Dashboard
            </a>
            <a href="{% url 'accounts:logout' %}" class="flex items-center justify-center w-full py-4 border-2 border-zinc-700 rounded-xl font-bold hover:bg-zinc-800 transition-all uppercase tracking-widest text-zinc-200">
                Logout
            </a>
            {% else %}
            <a href="{% url 'accounts:register' %}" class="flex items-center justify-center gap-2 w-full py-4 bg-primary text-black font-bold rounded-xl hover:brightness-110 transition-all uppercase tracking-widest">
                <span class="material-icons-round">shopping_bag</span>
                Get Your Card
            </a>
            <a href="{% url 'accounts:login' %}" class="flex items-center justify-center w-full py-4 border-2 border-zinc-700 rounded-xl font-bold hover:bg-zinc-800 transition-all uppercase tracking-widest text-zinc-200">
                Log In
            </a>
            {% endif %}
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.getElementById('navbarToggle');
        const mobileNav = document.getElementById('mobileNav');
        const closeBtn = document.getElementById('mobileNavClose');
        
        function openNav() {
            mobileNav.classList.remove('translate-x-full');
            history.pushState({ mobileNav: true }, '');
            document.body.style.overflow = 'hidden';
        }
        
        function closeNav() {
            mobileNav.classList.add('translate-x-full');
            document.body.style.overflow = '';
        }
        
        if (toggle && mobileNav) {
            toggle.addEventListener('click', openNav);
        }
        
        if (closeBtn && mobileNav) {
            closeBtn.addEventListener('click', function() {
                closeNav();
                if (history.state && history.state.mobileNav) {
                    history.back();
                }
            });
        }
        
        window.addEventListener('popstate', function(e) {
            if (mobileNav && !mobileNav.classList.contains('translate-x-full')) {
                closeNav();
            }
        });
        
        mobileNav.querySelectorAll('a').forEach(function(link) {
            link.addEventListener('click', function() {
                closeNav();
            });
        });
    });
</script>